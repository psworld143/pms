# Apache Configuration for PMS Hotel System
# This file ensures proper routing and security

# Enable Rewrite Engine
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Redirect to HTTPS if not already on HTTPS (for production)
    # RewriteCond %{HTTPS} off
    # RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
    
    # If the requested file/directory exists, serve it
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
</IfModule>

# Prevent directory browsing
Options -Indexes

# Set default document
DirectoryIndex index.php index.html

# PHP Configuration (if allowed by hosting)
<IfModule mod_php.c>
    php_value upload_max_filesize 10M
    php_value post_max_size 10M
    php_value max_execution_time 300
    php_value max_input_time 300
    php_value memory_limit 256M
</IfModule>

# Security Headers
<IfModule mod_headers.c>
    # Prevent clickjacking
    Header always set X-Frame-Options "SAMEORIGIN"
    
    # XSS Protection
    Header always set X-XSS-Protection "1; mode=block"
    
    # Content Type Options
    Header always set X-Content-Type-Options "nosniff"
    
    # Referrer Policy
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Protect sensitive files
<FilesMatch "(^#.*#|\.(bak|config|sql|fla|psd|ini|log|sh|inc|swp|dist)|~)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Protect database.local.php from direct access
<Files "database.local.php">
    Order allow,deny
    Deny from all
</Files>

# Error pages (optional - uncomment if you create custom error pages)
# ErrorDocument 404 /404.php
# ErrorDocument 500 /500.php

# Force UTF-8 encoding
AddDefaultCharset UTF-8

